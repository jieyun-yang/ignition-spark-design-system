{"version":3,"file":"Filter-K3BpXqIg.js","sources":["../design-system/components/Filter/Filter.tsx"],"sourcesContent":["/**\n * Filter Component\n *\n * A pill-style filter button with dropdown popover for selecting filter options.\n * Matches Figma Filter design.\n *\n * Figma: https://www.figma.com/design/pFe8ykz2F9QdvabPsTGl1L/Spark-%7C-Components?node-id=5773-12918\n *\n * @example\n * <Filter\n *   label=\"Status\"\n *   value=\"Active\"\n *   options={['Active', 'Inactive', 'Pending']}\n *   onApply={(value) => console.log(value)}\n *   onRemove={() => console.log('removed')}\n * />\n */\n\nimport React, { useState, useRef, useEffect } from 'react';\nimport clsx from 'clsx';\nimport { Icon } from '../Icon';\nimport styles from './Filter.module.css';\n\nexport interface FilterOption {\n  label: string;\n  value: string;\n}\n\nexport interface FilterProps {\n  /** Filter label (e.g., \"Status\", \"Type\") */\n  label: string;\n\n  /** Optional sub-filter label shown above the main label */\n  subLabel?: string;\n\n  /** Currently selected value */\n  value?: string;\n\n  /** Filter options - can be array of strings or objects with label/value */\n  options?: string[] | FilterOption[];\n\n  /** Allow custom text input instead of predefined options */\n  allowCustomInput?: boolean;\n\n  /** Placeholder for custom input */\n  inputPlaceholder?: string;\n\n  /** Callback when filter is applied */\n  onApply?: (value: string) => void;\n\n  /** Callback when filter is removed */\n  onRemove?: () => void;\n\n  /** Additional CSS class */\n  className?: string;\n}\n\nexport function Filter({\n  label,\n  subLabel,\n  value,\n  options = [],\n  allowCustomInput = false,\n  inputPlaceholder = 'Enter value...',\n  onApply,\n  onRemove,\n  className,\n}: FilterProps) {\n  const [isOpen, setIsOpen] = useState(false);\n  const [selectedValue, setSelectedValue] = useState(value || '');\n  const [customInput, setCustomInput] = useState('');\n  const [isHovered, setIsHovered] = useState(false);\n  const dropdownRef = useRef<HTMLDivElement>(null);\n\n  // Normalize options to FilterOption format\n  const normalizedOptions: FilterOption[] = options.map(opt =>\n    typeof opt === 'string' ? { label: opt, value: opt } : opt\n  );\n\n  // Close dropdown when clicking outside\n  useEffect(() => {\n    function handleClickOutside(event: MouseEvent) {\n      if (dropdownRef.current && !dropdownRef.current.contains(event.target as Node)) {\n        setIsOpen(false);\n      }\n    }\n\n    if (isOpen) {\n      document.addEventListener('mousedown', handleClickOutside);\n      return () => document.removeEventListener('mousedown', handleClickOutside);\n    }\n  }, [isOpen]);\n\n  const handleApply = () => {\n    const valueToApply = allowCustomInput ? customInput : selectedValue;\n    if (valueToApply && onApply) {\n      onApply(valueToApply);\n    }\n    setIsOpen(false);\n  };\n\n  const handleRemove = (e: React.MouseEvent) => {\n    e.stopPropagation();\n    if (onRemove) {\n      onRemove();\n    }\n  };\n\n  const hasValue = Boolean(value);\n\n  return (\n    <div className={clsx(styles.filterWrapper, className)} ref={dropdownRef}>\n      <div\n        className={styles.filterContainer}\n        onMouseEnter={() => setIsHovered(true)}\n        onMouseLeave={() => setIsHovered(false)}\n      >\n        <button\n          className={clsx(\n            styles.filter,\n            hasValue && styles.hasValue,\n            isHovered && styles.hovered\n          )}\n          onClick={() => setIsOpen(!isOpen)}\n          aria-expanded={isOpen}\n        >\n          <div className={styles.filterContent}>\n            <div className={styles.labelGroup}>\n              {subLabel && <span className={styles.subLabel}>{subLabel}</span>}\n              <span className={styles.label}>{label}</span>\n            </div>\n            {value && <span className={styles.value}>{value}</span>}\n          </div>\n\n          <span className={styles.dropdownIcon}>\n            <Icon name=\"chevron-down\" variant=\"solid\" />\n          </span>\n        </button>\n\n        {hasValue && isHovered && (\n          <button\n            className={styles.removeButton}\n            onClick={handleRemove}\n            aria-label=\"Remove filter\"\n          >\n            <Icon name=\"xmark\" variant=\"solid\" />\n          </button>\n        )}\n      </div>\n\n      {isOpen && (\n        <div className={styles.popover}>\n          <div className={styles.popoverContent}>\n            {normalizedOptions.length > 0 && (\n              <div className={styles.optionsList}>\n                {normalizedOptions.map((option) => (\n                  <label key={option.value} className={styles.optionItem}>\n                    <input\n                      type=\"radio\"\n                      name={`filter-${label}`}\n                      value={option.value}\n                      checked={selectedValue === option.value}\n                      onChange={() => setSelectedValue(option.value)}\n                      className={styles.radio}\n                    />\n                    <span className={styles.optionLabel}>{option.label}</span>\n                  </label>\n                ))}\n              </div>\n            )}\n\n            {allowCustomInput && (\n              <div className={styles.customInput}>\n                <input\n                  type=\"text\"\n                  value={customInput}\n                  onChange={(e) => setCustomInput(e.target.value)}\n                  placeholder={inputPlaceholder}\n                  className={styles.textInput}\n                />\n              </div>\n            )}\n\n            <div className={styles.popoverActions}>\n              <button\n                className={styles.doneButton}\n                onClick={handleApply}\n              >\n                Done\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":["Filter","label","subLabel","value","options","allowCustomInput","inputPlaceholder","onApply","onRemove","className","isOpen","setIsOpen","useState","selectedValue","setSelectedValue","customInput","setCustomInput","isHovered","setIsHovered","dropdownRef","useRef","normalizedOptions","opt","useEffect","handleClickOutside","event","handleApply","valueToApply","handleRemove","e","hasValue","jsxs","clsx","styles","jsx","Icon","option"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyDO,SAASA,GAAO;AAAA,EACrB,OAAAC;AAAA,EACA,UAAAC;AAAA,EACA,OAAAC;AAAA,EACA,SAAAC,IAAU,CAAA;AAAA,EACV,kBAAAC,IAAmB;AAAA,EACnB,kBAAAC,IAAmB;AAAA,EACnB,SAAAC;AAAA,EACA,UAAAC;AAAA,EACA,WAAAC;AACF,GAAgB;AACd,QAAM,CAACC,GAAQC,CAAS,IAAIC,EAAS,EAAK,GACpC,CAACC,GAAeC,CAAgB,IAAIF,EAAST,KAAS,EAAE,GACxD,CAACY,GAAaC,CAAc,IAAIJ,EAAS,EAAE,GAC3C,CAACK,GAAWC,CAAY,IAAIN,EAAS,EAAK,GAC1CO,IAAcC,EAAuB,IAAI,GAGzCC,IAAoCjB,EAAQ;AAAA,IAAI,CAAAkB,MACpD,OAAOA,KAAQ,WAAW,EAAE,OAAOA,GAAK,OAAOA,MAAQA;AAAA,EAAA;AAIzD,EAAAC,EAAU,MAAM;AACd,aAASC,EAAmBC,GAAmB;AAC7C,MAAIN,EAAY,WAAW,CAACA,EAAY,QAAQ,SAASM,EAAM,MAAc,KAC3Ed,EAAU,EAAK;AAAA,IAEnB;AAEA,QAAID;AACF,sBAAS,iBAAiB,aAAac,CAAkB,GAClD,MAAM,SAAS,oBAAoB,aAAaA,CAAkB;AAAA,EAE7E,GAAG,CAACd,CAAM,CAAC;AAEX,QAAMgB,IAAc,MAAM;AACxB,UAAMC,IAAetB,IAAmBU,IAAcF;AACtD,IAAIc,KAAgBpB,KAClBA,EAAQoB,CAAY,GAEtBhB,EAAU,EAAK;AAAA,EACjB,GAEMiB,IAAe,CAACC,MAAwB;AAC5C,IAAAA,EAAE,gBAAA,GACErB,KACFA,EAAA;AAAA,EAEJ,GAEMsB,IAAW,EAAQ3B;AAEzB,SACE,gBAAA4B,EAAC,SAAI,WAAWC,EAAKC,EAAO,eAAexB,CAAS,GAAG,KAAKU,GAC1D,UAAA;AAAA,IAAA,gBAAAY;AAAA,MAAC;AAAA,MAAA;AAAA,QACC,WAAWE,EAAO;AAAA,QAClB,cAAc,MAAMf,EAAa,EAAI;AAAA,QACrC,cAAc,MAAMA,EAAa,EAAK;AAAA,QAEtC,UAAA;AAAA,UAAA,gBAAAa;AAAA,YAAC;AAAA,YAAA;AAAA,cACC,WAAWC;AAAA,gBACTC,EAAO;AAAA,gBACPH,KAAYG,EAAO;AAAA,gBACnBhB,KAAagB,EAAO;AAAA,cAAA;AAAA,cAEtB,SAAS,MAAMtB,EAAU,CAACD,CAAM;AAAA,cAChC,iBAAeA;AAAA,cAEf,UAAA;AAAA,gBAAA,gBAAAqB,EAAC,OAAA,EAAI,WAAWE,EAAO,eACrB,UAAA;AAAA,kBAAA,gBAAAF,EAAC,OAAA,EAAI,WAAWE,EAAO,YACpB,UAAA;AAAA,oBAAA/B,KAAY,gBAAAgC,EAAC,QAAA,EAAK,WAAWD,EAAO,UAAW,UAAA/B,GAAS;AAAA,oBACzD,gBAAAgC,EAAC,QAAA,EAAK,WAAWD,EAAO,OAAQ,UAAAhC,EAAA,CAAM;AAAA,kBAAA,GACxC;AAAA,kBACCE,KAAS,gBAAA+B,EAAC,QAAA,EAAK,WAAWD,EAAO,OAAQ,UAAA9B,EAAA,CAAM;AAAA,gBAAA,GAClD;AAAA,gBAEA,gBAAA+B,EAAC,QAAA,EAAK,WAAWD,EAAO,cACtB,UAAA,gBAAAC,EAACC,GAAA,EAAK,MAAK,gBAAe,SAAQ,QAAA,CAAQ,EAAA,CAC5C;AAAA,cAAA;AAAA,YAAA;AAAA,UAAA;AAAA,UAGDL,KAAYb,KACX,gBAAAiB;AAAA,YAAC;AAAA,YAAA;AAAA,cACC,WAAWD,EAAO;AAAA,cAClB,SAASL;AAAA,cACT,cAAW;AAAA,cAEX,UAAA,gBAAAM,EAACC,GAAA,EAAK,MAAK,SAAQ,SAAQ,QAAA,CAAQ;AAAA,YAAA;AAAA,UAAA;AAAA,QACrC;AAAA,MAAA;AAAA,IAAA;AAAA,IAIHzB,KACC,gBAAAwB,EAAC,OAAA,EAAI,WAAWD,EAAO,SACrB,UAAA,gBAAAF,EAAC,OAAA,EAAI,WAAWE,EAAO,gBACpB,UAAA;AAAA,MAAAZ,EAAkB,SAAS,KAC1B,gBAAAa,EAAC,OAAA,EAAI,WAAWD,EAAO,aACpB,UAAAZ,EAAkB,IAAI,CAACe,MACtB,gBAAAL,EAAC,SAAA,EAAyB,WAAWE,EAAO,YAC1C,UAAA;AAAA,QAAA,gBAAAC;AAAA,UAAC;AAAA,UAAA;AAAA,YACC,MAAK;AAAA,YACL,MAAM,UAAUjC,CAAK;AAAA,YACrB,OAAOmC,EAAO;AAAA,YACd,SAASvB,MAAkBuB,EAAO;AAAA,YAClC,UAAU,MAAMtB,EAAiBsB,EAAO,KAAK;AAAA,YAC7C,WAAWH,EAAO;AAAA,UAAA;AAAA,QAAA;AAAA,0BAEnB,QAAA,EAAK,WAAWA,EAAO,aAAc,YAAO,MAAA,CAAM;AAAA,MAAA,EAAA,GATzCG,EAAO,KAUnB,CACD,GACH;AAAA,MAGD/B,KACC,gBAAA6B,EAAC,OAAA,EAAI,WAAWD,EAAO,aACrB,UAAA,gBAAAC;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,MAAK;AAAA,UACL,OAAOnB;AAAA,UACP,UAAU,CAACc,MAAMb,EAAea,EAAE,OAAO,KAAK;AAAA,UAC9C,aAAavB;AAAA,UACb,WAAW2B,EAAO;AAAA,QAAA;AAAA,MAAA,GAEtB;AAAA,MAGF,gBAAAC,EAAC,OAAA,EAAI,WAAWD,EAAO,gBACrB,UAAA,gBAAAC;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,WAAWD,EAAO;AAAA,UAClB,SAASP;AAAA,UACV,UAAA;AAAA,QAAA;AAAA,MAAA,EAED,CACF;AAAA,IAAA,EAAA,CACF,EAAA,CACF;AAAA,EAAA,GAEJ;AAEJ;"}
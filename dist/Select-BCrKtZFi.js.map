{"version":3,"file":"Select-BCrKtZFi.js","sources":["../design-system/components/Select/Select.tsx"],"sourcesContent":["/**\n * Select Component\n *\n * A dropdown select input with options menu.\n * Provides visual feedback and keyboard navigation.\n *\n * Figma: Matches Select in Spark Components\n *\n * @example\n * <Select\n *   value={selectedValue}\n *   onChange={setSelectedValue}\n *   options={[\n *     { value: '1', label: 'Option 1' },\n *     { value: '2', label: 'Option 2' }\n *   ]}\n *   placeholder=\"Select an option...\"\n * />\n */\n\nimport React, { useState, useRef, useEffect } from 'react';\nimport { Icon } from '../Icon';\nimport clsx from 'clsx';\nimport styles from './Select.module.css';\nimport { Menu } from '../Menu/Menu';\n\nexport interface SelectOption {\n  /** Option value */\n  value: string;\n\n  /** Display label */\n  label: string;\n\n  /** Optional icon for prominent style */\n  icon?: any;\n\n  /** Optional caption for prominent style */\n  caption?: string;\n}\n\nexport interface SelectProps {\n  /** Current selected value (string for single, array for multi) */\n  value?: string | string[];\n\n  /** Change handler (string for single, array for multi) */\n  onChange?: (value: string | string[]) => void;\n\n  /** Available options */\n  options: SelectOption[];\n\n  /** Placeholder text */\n  placeholder?: string;\n\n  /** Disabled state */\n  disabled?: boolean;\n\n  /** Error message to display below select */\n  errorMessage?: string;\n\n  /** Optional CSS class name */\n  className?: string;\n\n  /** Menu style variant */\n  menuVariant?: 'simple' | 'prominent';\n\n  /** Show clear button when value is selected */\n  clearable?: boolean;\n\n  /** Loading state - shows spinner */\n  loading?: boolean;\n\n  /** Callback when clear button is clicked */\n  onClear?: () => void;\n\n  /** Enable multi-select mode */\n  multiple?: boolean;\n}\n\nexport const Select: React.FC<SelectProps> = ({\n  value,\n  onChange,\n  options,\n  placeholder = 'Select...',\n  disabled = false,\n  errorMessage,\n  className,\n  menuVariant = 'simple',\n  clearable = false,\n  loading = false,\n  onClear,\n  multiple = false,\n}) => {\n  const [isOpen, setIsOpen] = useState(false);\n  const [isFocused, setIsFocused] = useState(false);\n  const containerRef = useRef<HTMLDivElement>(null);\n\n  // Normalize value to array for easier handling\n  const selectedValues = multiple\n    ? (Array.isArray(value) ? value : [])\n    : (value ? [value as string] : []);\n\n  // Find selected option label for single select\n  const selectedOption = !multiple ? options.find(opt => opt.value === value) : null;\n  const displayText = selectedOption ? selectedOption.label : placeholder;\n\n  // Close menu when clicking outside\n  useEffect(() => {\n    const handleClickOutside = (event: MouseEvent) => {\n      if (containerRef.current && !containerRef.current.contains(event.target as Node)) {\n        setIsOpen(false);\n      }\n    };\n\n    if (isOpen) {\n      document.addEventListener('mousedown', handleClickOutside);\n    }\n\n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside);\n    };\n  }, [isOpen]);\n\n  const handleToggle = () => {\n    if (!disabled) {\n      setIsOpen(!isOpen);\n    }\n  };\n\n  const handleSelect = (selectedValue: string) => {\n    if (!onChange) return;\n\n    if (multiple) {\n      const currentValues = Array.isArray(value) ? value : [];\n      const newValues = currentValues.includes(selectedValue)\n        ? currentValues.filter(v => v !== selectedValue)\n        : [...currentValues, selectedValue];\n      onChange(newValues);\n      // Keep menu open for multi-select\n    } else {\n      onChange(selectedValue);\n      setIsOpen(false);\n    }\n  };\n\n  const handleRemoveTag = (tagValue: string, event: React.MouseEvent) => {\n    event.stopPropagation();\n    if (!onChange || !multiple) return;\n\n    const currentValues = Array.isArray(value) ? value : [];\n    const newValues = currentValues.filter(v => v !== tagValue);\n    onChange(newValues);\n  };\n\n  const handleKeyDown = (event: React.KeyboardEvent) => {\n    if (disabled) return;\n\n    if (event.key === 'Enter' || event.key === ' ') {\n      event.preventDefault();\n      setIsOpen(!isOpen);\n    } else if (event.key === 'Escape') {\n      setIsOpen(false);\n    }\n  };\n\n  const handleClear = (event: React.MouseEvent) => {\n    event.stopPropagation();\n    if (onClear) {\n      onClear();\n    } else if (onChange) {\n      onChange(multiple ? [] : '');\n    }\n  };\n\n  const hasValue = multiple ? selectedValues.length > 0 : !!value;\n  const showClearButton = clearable && hasValue && !disabled && !loading;\n  const showChevron = !loading;\n\n  // Get selected option objects for multi-select\n  const selectedOptions = multiple\n    ? options.filter(opt => selectedValues.includes(opt.value))\n    : [];\n\n  return (\n    <div className={clsx(styles.wrapper, className)} ref={containerRef}>\n      <div\n        className={clsx(\n          styles.container,\n          isOpen && styles.open,\n          isFocused && styles.focused,\n          errorMessage && styles.error,\n          disabled && styles.disabled,\n          !selectedOption && styles.placeholder\n        )}\n        onClick={handleToggle}\n        onFocus={() => setIsFocused(true)}\n        onBlur={() => setIsFocused(false)}\n        onKeyDown={handleKeyDown}\n        tabIndex={disabled ? -1 : 0}\n        role=\"combobox\"\n        aria-expanded={isOpen}\n        aria-haspopup=\"listbox\"\n        aria-disabled={disabled}\n      >\n        {multiple ? (\n          <div className={styles.tagsContainer}>\n            {selectedOptions.length > 0 ? (\n              selectedOptions.map((opt) => (\n                <div key={opt.value} className={styles.tag}>\n                  <span className={styles.tagLabel}>{opt.label}</span>\n                  <button\n                    type=\"button\"\n                    className={styles.tagRemove}\n                    onClick={(e) => handleRemoveTag(opt.value, e)}\n                    aria-label={`Remove ${opt.label}`}\n                  >\n                    <Icon name=\"xmark\" className={styles.tagRemoveIcon} />\n                  </button>\n                </div>\n              ))\n            ) : (\n              <span className={styles.text}>{placeholder}</span>\n            )}\n          </div>\n        ) : (\n          <span className={styles.text}>{displayText}</span>\n        )}\n        <div className={styles.icons}>\n          {showClearButton && (\n            <button\n              type=\"button\"\n              className={styles.clearButton}\n              onClick={handleClear}\n              aria-label=\"Clear selection\"\n            >\n              <Icon name=\"xmark\" className={styles.clearIcon} />\n            </button>\n          )}\n          {loading && (\n            <Icon\n              name=\"spinner\"\n              className={styles.spinner}\n              spin\n            />\n          )}\n          {showChevron && (\n            <Icon\n              name=\"chevron-down\"\n              variant=\"solid\"\n              className={clsx(styles.chevron, isOpen && styles.chevronOpen)}\n            />\n          )}\n        </div>\n      </div>\n\n      {isOpen && !disabled && (\n        <Menu\n          options={options}\n          onSelect={handleSelect}\n          selectedValue={multiple ? undefined : (value as string)}\n          selectedValues={multiple ? selectedValues : undefined}\n          variant={menuVariant}\n        />\n      )}\n\n      {errorMessage && (\n        <div className={styles.errorMessage}>{errorMessage}</div>\n      )}\n    </div>\n  );\n};\n"],"names":["Select","value","onChange","options","placeholder","disabled","errorMessage","className","menuVariant","clearable","loading","onClear","multiple","isOpen","setIsOpen","useState","isFocused","setIsFocused","containerRef","useRef","selectedValues","selectedOption","opt","displayText","useEffect","handleClickOutside","event","handleToggle","handleSelect","selectedValue","currentValues","newValues","v","handleRemoveTag","tagValue","handleKeyDown","handleClear","hasValue","showClearButton","showChevron","selectedOptions","jsxs","clsx","styles","jsx","e","Icon","Menu"],"mappings":"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"}